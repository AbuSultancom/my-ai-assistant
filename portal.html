<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenClaw AI Academy | CSCA Premium</title>
    <style>
        :root { 
            --main-red: #d63031; --main-blue: #0984e3; --bg: #dfe6e9; 
            --card-bg: #ffffff; --sidebar-bg: #2d3436; --accent: #00b894;
        }
        body { font-family: 'Inter', 'Segoe UI', sans-serif; background: var(--bg); margin: 0; display: flex; height: 100vh; color: #2d3436; }
        
        /* Sidebar Upgrade */
        .sidebar { width: 300px; background: var(--sidebar-bg); color: white; display: flex; flex-direction: column; box-shadow: 4px 0 15px rgba(0,0,0,0.2); }
        .sidebar-header { padding: 30px; background: var(--main-red); text-align: center; font-weight: 800; font-size: 1.4em; letter-spacing: 1px; }
        .nav-menu { flex: 1; padding: 20px 0; }
        .nav-item { padding: 18px 30px; cursor: pointer; border-left: 4px solid transparent; transition: 0.3s; display: flex; align-items: center; gap: 10px; }
        .nav-item:hover { background: rgba(255,255,255,0.05); }
        .nav-item.active { background: #3d464d; border-left-color: var(--accent); color: var(--accent); }
        .nav-item.locked { opacity: 0.4; cursor: not-allowed; }

        /* Main Content Upgrade */
        .main-container { flex: 1; display: flex; flex-direction: column; overflow: hidden; background: #fdfdfd; }
        .top-nav { height: 70px; background: white; border-bottom: 1px solid #ddd; display: flex; align-items: center; justify-content: space-between; padding: 0 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
        .status-badge { background: #e1f5fe; color: #0288d1; padding: 5px 15px; border-radius: 20px; font-size: 0.85em; font-weight: bold; }
        
        .viewport { flex: 1; overflow-y: auto; padding: 50px; scroll-behavior: smooth; }
        .page { display: none; max-width: 900px; margin: auto; }
        .page.active { display: block; animation: fadeInUp 0.5s ease-out; }
        
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .card { background: white; border-radius: 16px; padding: 40px; margin-bottom: 35px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); border: 1px solid #f1f1f1; }
        h1, h2 { color: #2d3436; margin-top: 0; }
        .rule-box { background: #f0f7ff; border-left: 6px solid var(--main-blue); padding: 25px; border-radius: 8px; margin: 25px 0; font-weight: 500; }
        .example-block { background: #fafafa; border: 1px solid #eee; padding: 20px; border-radius: 10px; margin: 20px 0; border-right: 5px solid var(--main-red); }
        .formula { font-family: 'Cambria Math', serif; font-size: 1.4em; color: var(--main-red); }

        /* Interaction Panel */
        .interaction-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 40px; }
        .panel { background: white; border-radius: 16px; padding: 30px; box-shadow: 0 15px 45px rgba(0,0,0,0.08); border-top: 5px solid var(--accent); }
        textarea { width: 100%; height: 160px; padding: 15px; border-radius: 12px; border: 1px solid #e0e0e0; font-size: 16px; margin-top: 15px; transition: 0.3s; outline: none; }
        textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 4px rgba(0, 184, 148, 0.1); }
        button { width: 100%; background: var(--sidebar-bg); color: white; border: none; padding: 18px; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 1em; margin-top: 15px; transition: 0.3s; }
        button:hover { background: #000; transform: translateY(-2px); }

        .feedback-bubble { background: #f1f2f6; padding: 20px; border-radius: 15px; border-bottom-left-radius: 2px; position: relative; line-height: 1.6; }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">OPENCLAW ACADEMY</div>
        <nav class="nav-menu">
            <div class="nav-item active" onclick="showPage('overview')">üè† Student Dashboard</div>
            <div class="nav-item" onclick="showPage('lesson1')">üìö [Full] Chapter 1: Sets</div>
            <div class="nav-item" onclick="showPage('practice')">üìù CSCA Exam Bank</div>
            <div class="nav-item locked">üîí Lesson 2: Inequalities</div>
            <div class="nav-item locked">üîí Lesson 3: Functions</div>
        </nav>
        <div style="padding: 30px; font-size: 0.8em; opacity: 0.6;">System ID: A-2026-X</div>
    </aside>

    <main class="main-container">
        <div class="top-nav">
            <div id="pageTitle">Student Dashboard</div>
            <div class="status-badge">Instructor: Abu (Online)</div>
        </div>

        <div class="viewport">
            
            <!-- OVERVIEW PAGE -->
            <div id="overview" class="page active">
                <div class="card">
                    <h1>Welcome, Abdulhameed üéì</h1>
                    <p>This is your personalized AI learning environment. I've evolved the system to be your 1-on-1 private tutor for the CSCA exam.</p>
                    <div class="interaction-grid">
                        <div class="panel">
                            <h3>üôã‚Äç‚ôÇÔ∏è Question for Abu</h3>
                            <p>Stuck on a problem? Paste it here for an instant breakdown.</p>
                            <textarea id="studentQ" placeholder="Type your question..."></textarea>
                            <button onclick="askAbu()">Send Question</button>
                        </div>
                        <div class="panel" style="border-top-color: var(--main-red);">
                            <h3>üë®‚Äçüè´ Abu's Board</h3>
                            <div id="teacherFeedback" class="feedback-bubble">
                                I'm watching your progress. Start by reviewing the full Chapter 1!
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LESSON 1 PAGE -->
            <div id="lesson1" class="page">
                <div class="card">
                    <h1>Chapter 1: The World of Sets</h1>
                    <div class="rule-box">
                        A set is a well-defined collection of distinct objects (elements).
                    </div>
                    <h2>Key Operations</h2>
                    <div class="example-block">
                        <strong>Intersection (‚à©):</strong> Shared elements. <br>
                        <strong>Union (‚à™):</strong> All elements together. <br>
                        <strong>Complement (A'):</strong> Everything outside A.
                    </div>
                </div>
            </div>

            <!-- PRACTICE PAGE -->
            <div id="practice" class="page">
                <div class="card">
                    <h1>CSCA Exam Bank</h1>
                    <p>Coming soon: Integrated questions from csca.app with interactive solving.</p>
                </div>
            </div>

        </div>
    </main>

    <script>
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            event.currentTarget.classList.add('active');
            document.getElementById('pageTitle').innerText = event.currentTarget.innerText;
        }

        async function loadState() {
            try {
                const res = await fetch('/api/state');
                const data = await res.json();
                document.getElementById('teacherFeedback').innerText = data.teacher_feedback;
            } catch (e) {}
        }

        async function askAbu() {
            const msg = document.getElementById('studentQ').value;
            await fetch('/api/ask', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({text: msg}) });
            document.getElementById('studentQ').value = "";
        }

        loadState();
        setInterval(loadState, 4000);
    </script>
</body>
</html>
